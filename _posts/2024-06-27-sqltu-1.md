---
title: 1) SQL 파싱과 최적화
categories: [친절한 SQL 튜닝, 1. SQL 처리 과정과 I/O]
tags: [SQL튜닝]
---

## SQL

> **S**tructured **Q**uery **L**anguage
> 

- 구조적, 집합적, 선언적인 질의 언어
- SQL을 프로시저(명령어 집합)로 만들어내는 역할을 옵티마이저가 한다
    - 컴파일러와 같은 역할

## SQL 처리 과정

> SQL로부터 프로시저를 작성하고 컴파일 해, 실행 가능한 상태로 만드는 전 과정 
> 

1. SQL 파싱 - 파서가 수행 
    - 파싱 트리 생성(구조 파악)
    - 문법(Syntax) 체크
    - 의미(Sematic) 체크
2. SQL 최적화  - 옵티마이저가 수행
    1. 실행 계획 후보 선정
    2. 각 예상 비용 산정
    3. 최저 비용의 실행 경로(계획) 선택
3. 로우 소스 생성 - 로우 소스 생성기가 수행
    - 실행 경로를 프로시저 형태로 포맷팅

> 💡 **알아두면 좋아요**  
> - SQL 옵티마이저
>     - 최적의 데이터 엑세스 경로를 선택해 주는 DBMS의 핵심 엔진
> - 실행 계획
>     - 옵티마이저가 생성한 처리절차를 트리 구조로 표현한 것
> - 비용(Cost)
>     - 쿼리를 수행하는 동안 발생할 것으로 예상하는 I/O 횟수 또는 예상 소요시간 표현
> 

## 옵티마이저 힌트

- 옵티마이저는 완벽하지 않다. 실행 계획을 수동으로 변경할 수 있는 방법은 없을까?
- 옵티마이저 힌트를 이용하면 개발자가 더 효율적인 액세스 경로로 바꿀 수 있다 
- 사용법 `/*+ 힌트 */`
    
    ```java
    SELECT **/*+ INDEX(A 고객_PK) */**
    			 고객명, 연락처, 주소, ..
    FROM 고객 A
    WHERE 고객ID = '00008' 
    ```
    
- 주의
    - 힌트 안의 인자는 콤마 사용 가능
    - 힌트와 힌트 사이 콤마 사용 불가능